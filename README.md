
> ※ 後日、CIの最新Run URLへ差し替え推奨（固定リンク）。  
> 📊 [KPI Dashboard](/dashboard/audit) - 継続監査KPI可視化

- デプロイ手順: `docs/deploy/VERCEL_DEPLOY_GUIDE.md` を参照

**Starlist アプリ 要件定義書**

**この要件定義書は、Starlistアプリの開発指針を体系的にまとめたものです。プロジェクト概要から技術スタック、差別化戦略までを網羅しています。**

**目次**

1. **プロジェクト概要**  
2. **ターゲットユーザー層**  
3. **システム要件**  
4. **機能要件**  
5. **課金・収益モデル**  
6. **UI/UX要件**  
7. **特殊機能要件**  
8. **非機能要件**  
9. **開発フェーズ**  
10. **技術スタック**  
11. **技術要件詳細**  
12. **リスクと対策**  
13. **成功指標**  
14. **市場ポジショニングと差別化要素**  
15. **AIとの連携ポイント**  
16. **提供コンテンツ一覧**

---

**1\. プロジェクト概要**

* **1-1. プロジェクト名 Starlist（スターリスト）**

---

## Security Artifacts

- **Gitleaks artifacts**: Actions → Extended Security → `sec-gitleaks-*` delivers `gitleaks-<scope>.sarif`. Inspect with the GitHub Security tab or a SARIF viewer for detailed findings.
* **1-2. プロジェクト目的 芸能人からインフルエンサーまで幅広い有名人（以下、スター）が、日常で見たり聴いたりするコンテンツや商品などの消費行動データを記録・共有し、ファンがそれを閲覧・応援できるプラットフォームを構築します。 Starlistはスターのリアルな「日常生活データ」そのものを価値とし、ファンとスターを新しい形でつなげるサービスを目指します。 スターは、YouTubeの視聴履歴、好きな音楽、購入した商品などの情報を簡単にプラットフォームに取り込み、公開したい範囲で共有できます。これにより、特別なコンテンツ制作（動画や画像の撮影・編集など）を行わなくても、自身の活動をマネタイズすることが可能になります。ファンは、スターの日常をより身近に感じ、新たな応援の形を見つけることができます。 会員制度を通じて、スターは安定した収入基盤を確保し、ファンは限定コンテンツへのアクセスやスターとの特別な交流機会を得られるエコシステムを構築します。**  
* **1-3. 特徴**  
  * **スターの日常データが中心の独自エコシステム： 画像や動画、文章ではなく、視聴履歴や購買履歴といった日常の記録データを軸にした新しいファンとの関係構築。**  
  * **手軽なデータ共有によるマネタイズ： 従来のコンテンツ制作（撮影、編集、執筆等）に縛られず、日常のデータを共有するだけで収益化が可能。手軽さによりスターの負担を軽減。**  
  * **新たな収益化層の開拓： これまで収益化が難しかったマイクロ・ミドルインフルエンサー（フォロワー1千〜1万人規模）にも新たなマネタイズ手段を提供。**  
  * **リアルタイムに近い情報共有： 日常の行動データが主体のため、コンテンツ制作時間を待たずにスターの「今」に近い情報をファンへ迅速に提供。**  
  * **多層的な会員制度： ライト、スタンダード、プレミアムといった複数のプランを用意し、ファンは自身の熱量に合わせて段階的な特典を享受。**  
  * **データ取り込みの容易さ： スマートフォンOS標準のOCR機能などを活用して抽出したテキストデータをStarlistにコピー＆ペーストし、GoogleのAPIを通じて様々な視聴・購入履歴データを簡単に取り込み、カテゴリ分類や情報整理の手間を最小化。（注記：現時点ではYouTube Data API等の直接的なAPI連携機能は未実装です）**  
  * **プライバシーへの配慮： スター自身が共有するデータの種類や公開範囲を細かくコントロール可能。**  
  * **質の高いコミュニケーション環境（ストレスフリー設計）： 有料会員限定のコメント機能により、荒らしや誹謗中傷のリスクを低減。スターのメンタルヘルスに配慮し、ストレスの少ない建設的な交流を促進。**  
  * **多様な収益モデル： 会員制度のサブスクリプション収入に加え、チケット制でのコンテンツ課金、アフィリエイト連携、オファーウォール広告など複数の収益源を提供。**

**2\. ターゲットユーザー層**

* **2-1. スター側ターゲット層（3層構造）**  
  * **2-1-1. スーパースター**  
    * **定義: YouTuber、ストリーマー、芸能人など既に影響力を持つ人物**  
    * **特徴:**  
      * **フォロワー数10万人以上**  
      * **複数のプラットフォームで活動**  
      * **収益化済み**  
    * **ニーズ:**  
      * **ファンとの関係強化**  
      * **収益の多様化**  
      * **データに基づくコンテンツ戦略**  
    * **市場規模: 日本国内約5,000人、年収250万〜1,000万円以上**  
  * **2-1-2. ゴールドスター**  
    * **定義: 中規模の影響力を持ち始めている人物**  
    * **特徴:**  
      * **フォロワー数1万〜10万人**  
      * **特定ジャンルの専門性**  
    * **ニーズ:**  
      * **ファン層の拡大**  
      * **収益化の本格化**  
      * **差別化戦略の構築**  
    * **市場規模: 日本国内約5万人**  
  * **2-1-3. ライトスター**  
    * **定義: 小規模だが特定のフォロワーを持つ人物**  
    * **特徴:**  
      * **フォロワー数1,000人以上または審査制**  
      * **特定分野での専門知識や個性的なコンテンツ**  
    * **ニーズ:**  
      * **ファンコミュニティの構築**  
      * **認知度向上**  
      * **収益化の開始**  
    * **市場規模: 日本国内約50万人**  
* **2-2. ファン側ターゲット層（3層構造）**  
  * **2-2-1. スーパーファン**  
    * **定義: 熱心な応援会員、プラチナ会員など積極的に金銭的サポートを行うファン**  
    * **特徴:**  
      * **月間支出5,000円以上**  
      * **複数のスターを支援**  
      * **グッズ購入やイベント参加に積極的**  
    * **ニーズ:**  
      * **スターとの特別な交流**  
      * **限定コンテンツ**  
      * **コミュニティでの存在感**  
    * **人口比: Z世代・ミレニアル世代の約5%、推定100万人**  
  * **2-2-2. ゴールドファン**  
    * **定義: 基本応援会員、コンテンツ別購入者など適度にサポートを行うファン**  
    * **特徴:**  
      * **月間支出1,000〜5,000円**  
      * **特定のスターを中心に支援**  
      * **選択的なコンテンツ消費**  
    * **ニーズ:**  
      * **質の高いコンテンツ**  
      * **適切な価格設定**  
      * **使いやすいプラットフォーム**  
    * **人口比: Z世代・ミレニアル世代の約15%、推定300万人**  
  * **2-2-3. ライトファン**  
    * **定義: 無料ユーザー、ソロファンなど軽度の関与を行うファン**  
    * **特徴:**  
      * **月間支出1,000円未満**  
      * **無料コンテンツ中心の消費**  
      * **SNSでのフォローが主**  
    * **ニーズ:**  
      * **無料コンテンツの充実**  
      * **低価格帯のオプション**  
      * **簡単な支援方法**  
    * **人口比: Z世代・ミレニアル世代の約30%、推定600万人**

**3\. システム要件**

* **3-1. プラットフォーム**  
  * **モバイルアプリ: Next.js**  
  * **バックエンド: Supabase（PostgreSQL、認証、ストレージ）**  
  * **アーキテクチャ: クライアント-サーバーモデル、コードスプリッティングを積極採用**  
* **3-2. 認証システム**  
  * **Google/Apple/Twitter/Instagramログイン**  
  * **スター認証システム（公式SNS連携、本人確認書類、二次認証）**  
  * **一般人スター枠（フォロワー1,000人以上または審査制）**  
  * **Supabase Auth**  
* **3-3. データベース設計**  
  * **ユーザープロファイルテーブル**  
  * **コンテンツ消費データテーブル**  
  * **ファン-スター関係テーブル**  
  * **サブスクリプション管理テーブル**  
  * **投げ銭/トランザクションテーブル**  
  * **アフィリエイト成果管理テーブル**  
  * **ポイント管理テーブル**  
* **3-4. 基本性能要件**  
  * **起動時間: 3秒以内**  
  * **ページ読み込み: 1.5秒以内**  
  * **同時接続ユーザー: 最大100万人対応**  
  * **データ同期: リアルタイム/準リアルタイム**  
* **3-5. データモデル定義**  
  * **スターの日常データ: スターが日常的に消費する商品・サービスに関する構造化データ**  
    * **商品カテゴリ（食品、衣類、電子機器など）**  
    * **購入頻度（日次、週次、月次など）**  
    * **価格帯（低価格、中価格、高価格）**  
    * **購入場所（オンライン、実店舗、特定ブランド店など）**  
    * **消費コンテキスト（日常使用、特別な機会、プロフェッショナル用途など）**  
  * **プラットフォーム統合データ: 複数のSNSやプラットフォームからのデータを統合**  
    * **エンゲージメント指標（いいね数、コメント数、シェア数など）**  
    * **コンテンツ消費パターン（視聴時間、閲覧頻度など）**  
    * **フォロワー属性（年齢層、地域、興味関心など）**  
* **3-6. システムアーキテクチャ詳細**  
  * **フロントエンド: next.jsベースのクロスプラットフォームアプリケーション**  
  * **バックエンド: クリーンアーキテクチャに基づいた設計**  
    * **ドメイン層：ビジネスロジックとエンティティ定義**  
    * **ユースケース層：アプリケーション固有のビジネスルール**  
    * **インターフェース層：外部システムとの連携**  
    * **インフラストラクチャ層：データベース、API、外部サービス連携**  
  * **データ処理:**  
    * **インメモリキャッシュによるデータの再利用**  
    * **キャッシュの有効期限管理**  
    * **差分同期によるデータ転送量の削減**

**4\. 機能要件**

* **4-1. 共通基本機能**  
  * **ユーザー登録・ログイン**  
  * **プロフィール設定**  
  * **アプリ内通知**  
  * **検索・発見機能**  
  * **スターポイントシステム（オファーウォール等で獲得、チケット等に交換）**  
* **4-2. スター向け機能**  
  * **4-2-1. データ記録（手動・OS標準OCR機能等を活用したテキスト取り込み） スターが日常的に利用するサービス・行動のデータを記録します。将来的にはAPI連携による自動化も目指しますが、現時点では手動入力およびスマートフォンOS標準のOCR機能などを利用して抽出したテキストをStarlistにコピー＆ペーストし、それをGoogleのAPIで処理・分類する形を主とします。**  
    * **YouTube関連情報: フォローチャンネル、視聴履歴（OS標準OCR機能等で抽出したテキスト入力または手動入力）**  
    * **音楽データ: Spotify/Amazon Music再生履歴、視聴時間分析（OS標準OCR機能等で抽出したテキスト入力または手動入力）**  
    * **映像コンテンツ: Netflix/各種VOD視聴履歴（OS標準OCR機能等で抽出したテキスト入力または手動入力）**  
    * **書籍データ: 読書履歴（電子書籍・紙の書籍）（OS標準OCR機能等で抽出したテキスト入力または手動入力）**  
    * **購入履歴: Amazon/楽天/Yahoo\!ショッピングなど（OS標準OCR機能等で抽出したテキスト入力または手動入力、アフィリエイト連携）**  
    * **アプリ使用状況: スクリーンタイム、使用アプリランキング（手動入力またはスクリーンショットからOS標準OCR機能等で抽出したテキスト入力）**  
    * **食事データ: レシート情報（コンビニ、外食）、自炊記録：料理情報（OS標準OCR機能等で抽出したテキスト入力または手動入力）**  
  * **4-2-2. 取り込みテキストデータの処理・分類（Google API連携）**  
    * **レシート情報の自動読み取り支援: ユーザーがOS標準OCR機能等で抽出・ペーストしたレシートのテキストデータから、Google APIを活用して商品情報や店舗情報（店の名前のみ、特定可能な店舗名は読み込まない）を認識・抽出。**  
    * **視聴履歴の読み取り支援: 同様に、ユーザーが取り込んだ視聴履歴のテキストデータから、視聴動画、チャンネル、ジャンルなどをGoogle APIで認識・抽出。**  
    * **重複検出と自動統合機能: Google APIによる処理結果に基づき、類似データの重複検出と自動統合を試みる。**  
    * **選択的データ取り込み: Google APIによる処理・分類後、スターが表示/非表示を選択可能。**  
  * **4-2-3. データ管理**  
    * **プライバシーレベル設定（項目別公開設定）**  
    * **コンテンツカテゴリ管理**  
    * **公開スケジュール設定**  
  * **4-2-4. 収益機能**  
    * **ファン分析ダッシュボード**  
    * **収益レポート（サブスクリプション、チケット、アフィリエイト、投げ銭など）**  
  * **4-2-5. トレンド分析機能**  
    * **機能概要: AIを活用したトレンドコンテンツ分析**  
    * **技術実装:**  
      * **機械学習モデルによるコンテンツ分類**  
      * **時系列分析によるトレンド予測**  
      * **レコメンデーションエンジン**  
* **4-3. ファン向け機能**  
  * **4-3-1. スター発見・フォロー**  
    * **カテゴリ別スター一覧**  
      * **YouTuber（VTuber含む）**  
      * **ストリーマー（Twitch/ニコ生/ふわっちなど）**  
      * **クリエイター支援（Fantia/FANBOXなど）**  
      * **一般人スター**  
    * **フォロー管理（無料/エントリー/スタンダード/プレミアム）**  
  * **4-3-2. コンテンツ閲覧**  
    * **スターのアクティビティタイムライン**  
    * **カテゴリ別コンテンツ表示**  
    * **商品リンク（アフィリエイト対応、購入でスターを応援）**  
  * **4-3-3. インタラクション**  
    * **いいね・コメント機能**  
    * **投げ銭・サポート機能（応援チケット、スターポイントでの少額応援）**  
    * **おすすめ機能（楽曲/商品など）**  
  * **4-3-4. 特典・報酬**  
    * **バッジシステム（プレミアムファンバッジなど）**  
    * **VIPルームアクセス（将来的な最上位プラン向け）**  
    * **リアルタイム更新権（将来的な上位プラン向け）**  
    * **オファーウォール（タスク実行でスターポイント獲得）**

**5\. 課金・収益モデル**

**Starlistアプリの収益モデルは、多様なユーザー層とエンゲージメントレベルに対応するため、複数の収益源を組み合わせたハイブリッドモデルを採用します。主な収益源は、ファン向けの多層的な会員制度（サブスクリプション）、チケット制度（都度課金）、スターポイントシステム（アプリ内通貨）、アフィリエイト収入、広告収入（各種広告およびオファーウォール）です。**

* **5-1. ファン向け会員制度 ファンは自身の熱量や目的に合わせて、以下の3つの有料プランから選択できます。**  
  * **5-1-1. Premium プラス**  
    * **月額料金: 980円**  
    * **コンセプト: 気軽にスターの日常の一部に触れたい方向けのお試しプラン。**  
    * **主なサービス:**  
      * **ユーザーが選択した2つのデータカテゴリの基本情報を閲覧可能（カテゴリは月に1回変更可能）。**  
      * **広告表示あり。**  
      * **投票機能への参加：各投票に1票**
      * **スターの投稿への投稿可能** 
  * **5-1-2. Premium スタンダード**  
    * **月額料金: 1,980円**  
    * **コンセプト: スターの日常を幅広く知り、基本的な応援活動に参加したい方向けの標準プラン。**  
    * **主なサービス:**  
      * **スターの５つのデータカテゴリを閲覧可能** 
      * **投稿へのコメント参加が可能。**  
      * **投票制度への参加：各投票に2票**  
      * **広告非表示。**  
      * **スターの投稿への投稿可能**  
  * **5-1-3. Premium プラチナ**  
    * **月額料金: 2,980円**  
    * **コンセプト: スターの日常や考えをより深く理解し、特別なファンとしての一体感を得たい方向けの上位プラン。**  
    * **主なサービス:**  
      * **スターの全データカテゴリの詳細情報を閲覧可能（スターによる商品コメント・レビューも含む）。**  
      * **投票制度への参加：各投票に3票** 
      * **プレミアムファンバッジ: 課金月数に応じた数字が表示されるデザイン。コメント投稿時などにアカウント名の隣に表示。**  
      * **スーパーファンリストへのアカウント名掲載（希望者のみ）。**  
      * **スターへのコメント投稿が可能。**  
* **5-2. 無料会員**  
  * **役割:**  
    * **Starlistの基本的な魅力や雰囲気を体験。**  
    * **コミュニティの様子の閲覧。**  
    * **広告視聴やオファーウォール利用を通じた間接的な収益貢献。**  
    * **有料プランやゴールドチケット利用への興味喚起。**  
  * **提供サービス（チケットなしで利用可能）:**   
    * **スターの基本プロフィール閲覧。**  
    * **スターが「全体公開」に設定したお知らせや一部コンテンツの閲覧。**  
    * **スターポイント獲得機能:**  
      * **1日3回の無料ガチャ（スターポイント：10, 30, 50, 100, 300, 500ポイント、または稀にゴールドチケットを獲得）。**  
      * **広告動画視聴による追加ガチャチャンスやスターポイント付与。**  
      * **オファーウォール利用でのスターポイント獲得。**  
    * **ゴールドチケットへの交換機能（1,000 スターポイントでゴールドチケット1枚と交換）。**  
    * **広告表示あり。** 
* **5-3. ゴールドチケット**  
  * **役割:**  
    * **無料会員がスターポイントを消費して、有料コンテンツの一部を「お試し体験」する手段。**  
    * **有料プランへのアップグレードを促すための、課金への心理的ハードルを下げる役割。**    
  * **提供サービス（1枚で利用可能）:**  
    * **対象スター：選択したスター1人**
    * **対象カテゴリ：1つ**
    * **閲覧期間：使用時からスターが投稿した過去14日間の記録が閲覧可能**  
* **5-4. スターの負担軽減とコンテンツ運用の基本方針**   
  * **OCR:データ取り込み時の画像文字起こし**
  * **データ取り込み：文字起こし後のデータ整列**
  * **「無料公開オプション」の充実: スターが有料コンテンツ共有時に、無料公開範囲を簡単にコントロールできる設定機能を提供。** 
* **5-5. スターの負担を考慮し除外・優先度を下げたアイデア**
  * **スターが毎日、新規の文章作成や具体的な行動報告、目標設定・結果報告などを強いられるもの。**  
  * **スターが毎日何かを「選んで」投稿する必要があるもの（「ベスト」マーク付けは任意）。**

**6\. UI/UX要件**

* **6-1. 全体デザインコンセプト**  
  * **モダン、シンプルでありながらおしゃれなデザイン**  
  * **視覚的一貫性（フォント、ボタン、カラースキーム）**  
* **6-2. ナビゲーション構造**  
  * **左側サイドバー（デスクトップ）/ボトムナビゲーション（モバイル）**  
  * **カテゴリ別の階層的ナビゲーション**  
  * **リスト表示/グリッド表示の切替機能**  
* **6-3. 主要画面**  
  * **ホーム**
  * **ダッシュボード**  
  * **スター検索・発見**  
  * **コンテンツフィード**  
  * **カテゴリ別ビュー**  
  * **マイページ**
  * **マイデータ**  
  * **投票システム**
  * **データ取り込み画面**  
  * **選択画面（Google APIによる処理結果の確認・選択）**
  * **ガチャ**
  * **オファーウォール画面**  
  * **スターポイント管理画面**  
* **6-4. インタラクションデザイン**  
  * **自然なアニメーション・トランジション**  
  * **マイクロインタラクション**  
  * **状態フィードバック**  
* **6-5. レスポンシブデザイン**  
  * **様々な画面サイズに対応したUI設計**  
  * **オフライン対応: データのローカルストレージとオフライン操作の対応**

**7\. 特殊機能要件**

* **7-1. テキストデータ取り込みとGoogle APIによる処理機能**  
  * **7-1-1. 対応データソース（ユーザーがOS標準OCR機能等で抽出し、テキストとして取り込む対象の例）:**  
    * **YouTube視聴履歴**  
    * **Spotify再生履歴**  
    * **Netflix視聴履歴**  
    * **レシートデータ**  
    * **その他カスタム設定可能なデータソース**  
  * **7-1-2. 処理フロー:**  
    * **データタイプ選択（任意）**  
    * **テキストデータ入力（コピー＆ペースト）**  
    * **Google APIによる自動解析・分類**  
    * **重複検出と自動統合（可能な範囲で）**  
    * **ユーザーによる選択的取り込み（処理結果の確認・編集）**  
    * **選択データの保存**  
  * **7-1-3. プライバシー機能:**  
    * **取り込まれたテキストデータは、Google APIでの処理後、スターが選択した情報のみが保存される。**  
    * **住所や時間など、センシティブ情報の自動除外またはスターによるマスキング機能の提供を検討。**  
* **7-2. 投票システム**  
  * **複数形式対応（単一選択/複数選択/優先順位/スライダー）**  
  * **リアルタイム結果表示**  
  * **YouTuberなど配信者向け連携機能**  
  * **投票権スターポイント制度**  
  * **優先順位付け投票**  
  * **結果の視覚化**  
* **7-3. VIPルーム機能（将来的な最上位プラン向け）**  
  * **スターからの定期メッセージ/音声メッセージ**  
  * **限定コンテンツアクセス**  
  * **質問機会（月1回程度）**  
  * **継続特典システム**  
* **7-4. バッジ/ロイヤリティシステム**  
  * **プレミアムファンバッジ**  
  * **スターポイント獲得量や利用状況に応じたバッジ**  
  * **バッジ特典（リアルタイムアクセスなど、将来的な上位プラン向け）**  
  * **継続期間に応じた特典**  
* **7-5. 商品/コンテンツリコメンド**  
  * **リクエスト機能**  
  * **自動購入リンク生成（アフィリエイト連携）**  
* **7-6. 全プラットフォーム統合（将来構想）**  
  * **機能概要: 複数のSNSやプラットフォームからのデータを統合し、スターの活動全体像を把握しやすくすることを目指します。（注記：本機能は将来的な構想であり、初期リリースには含まれません。初期はOS標準OCR機能等を活用したテキスト取り込みと手動入力が中心となります。）**  
  * **技術実装（将来像）:**  
    * **OAuth認証によるプラットフォーム連携**  
    * **APIを通じたデータ取得と正規化**  
    * **クロスプラットフォーム分析エンジン**  
* **7-7. スターがストレスを感じない構造**  
  * **7-7-1. 段階的フィルタリングシステム**  
    * **統合コメント管理：スパムや不適切コメントを一元管理するタブ**  
  * **7-7-2. コメント分類と対応システム**  
    * **コメント分類AI：コメントを「建設的な意見」「否定的な意見」「無関係な誹謗中傷」に自動分類**  
    * **カスタムフィルターワード：スターが設定できる禁止ワードリスト**  
    * **特定ファンのブロック機能：**  
      * **ブロックレベルの設定:**  
        * **完全ブロック: コメント・いいね・閲覧をすべて禁止**  
        * **部分ブロック: コメントのみ禁止、閲覧は許可**  
        * **シャドウブロック: ユーザーには表示されるが他のファンには非表示**  
      * **ブロック期間の設定:**  
        * **一時的ブロック（24時間/7日間/30日間）**  
        * **永続的ブロック**  
  * **7-7-3. 課金商品提案機能**  
    * **階層型料金設定：**  
      * **投げ銭する事で
  * **7-7-4. スターによるコメント削除機能**  
    * **基本削除機能:**  
      * **個別コメントの削除**  
      * **複数コメントの一括削除**  
      * **スレッド（親コメントと返信）全体の削除**  
      * **コメントを完全に削除し、「削除されました」の表示も残さない（デフォルト機能）**  
    * **削除通知: 削除理由も通知も送らない（デフォルト機能）**  
    * **削除通知システム:**  
      * **コメント投稿者への削除通知**  
      * **削除理由の通知（教育的アプローチ）**  
      * **繰り返し違反に対する段階的対応（警告→一時的制限→永久制限）**  
    * **コミュニティガイドライン連携:**  
      * **削除時にガイドラインの関連セクションを表示**  
      * **ガイドライン違反の累積記録**  
      * **違反パターンの分析とガイドライン改善へのフィードバック**  
    * **条件付き削除ルール:**  
      * **特定キーワードを含むコメントの自動削除**  
      * **特定ユーザーからのコメントの自動削除**  
      * **特定時間帯に投稿されたコメントの一括削除**

**8\. 非機能要件**

* **8-1. セキュリティ**  
  * **エンドツーエンド暗号化（メッセージ）**  
  * **2要素認証**  
  * **データ暗号化（保存/転送時）**  
  * **不正アクセス検知**  
* **8-2. プライバシー**  
  * **取り込まれたテキストデータから住所の特定や位置情報など機微な情報が共有されないよう、スターによる確認・編集機能や、システムによるフィルタリング補助を提供。**  
  * **データ共有の粒度制御**  
  * **スターが共有を許可したデータのみが公開される**  
  * **プライバシー保護とデータ倫理を考慮した処理**  
* **8-3. パフォーマンス最適化**  
  * **コードスプリッティング**  
  * **画像最適化（WebP形式）**  
  * **遅延ロード**  
  * **キャッシュ戦略**  
  * **インメモリキャッシュによるデータの再利用**  
  * **キャッシュの有効期限管理**  
  * **差分同期によるデータ転送量の削減**  
* **8-4. スケーラビリティ**  
  * **シャーディング対応**  
  * **動的リソースプロビジョニング**  
  * **データアクセスパターン最適化**  
  * **非同期処理とキューイング**

**9\. Feature**
**スターの活動スケジュール公開機能** 

* **9-1. 
**10\. 技術スタック**

* **10-1. フロントエンド**  
  * **Flutter**  
  * **Dart**  
  * **Riverpod（状態管理）**  
  * **Lottie（アニメーション）**  
* **10-2. バックエンド**  
  * **Supabase**  
  * **PostgreSQL**  
  * **Google Cloud Functions（一部処理、Google API連携など）**  
  * **Cloud Storage**  
* **10-3. API/サービス連携**  
  * **決済システム（Stripe）**  
  * **アフィリエイトASP API（Amazon, 楽天, バリューコマース等）**  
  * **オファーウォールSDK（SKYFLAG, ironSource等）**  
  * **Google Cloud Natural Language API等のGoogle API（テキストデータ処理・分類用）**  
  * **（注記：YouTube Data API, Spotify API等の外部サービスとの直接的なAPI連携は現時点では未実装）**  
* **10-4. 開発・運用ツール**  
  * **Git/GitHub**  
  * **CI/CD（GitHub Actions）**  
  * **Firebase Analytics**  
  * **Crashlytics**  
* **10-5. API設計**  
  * **RESTful API: 標準的なHTTPメソッドを使用したリソース指向の設計**  
  * **GraphQL: 必要なデータのみを取得できる柔軟なクエリ機能**  
  * **WebSocket: リアルタイム通信によるライブ機能の実装**  
* **10-6. 技術選定の概要**  
  * **バックエンド基盤 : Supabaseを採用し、データベース、認証、ストレージなどのバックエンド機能を包括的に提供**  
  * **サーバーサイド処理 : Google Cloud Functionsをサーバーレスプラットフォームとして使用し、バックグラウンド処理やGoogle API連携による高度なデータ処理を実行**  
  * **フロントエンド開発 : Flutterを使用してiOS/Androidクロスプラットフォーム対応のモバイルアプリを構築**  
  * **テキストデータ処理・分類 : Google Cloud Natural Language API等のGoogle APIを活用し、ユーザーがOS標準OCR機能等で抽出・ペーストしたレシートや視聴履歴などのテキストデータから情報を抽出・分類。**  
  * **決済処理 : Stripeを導入し、サブスクリプションやマイクロトランザクションの安全な処理を実装**  
  * **アーキテクチャ : クリーンアーキテクチャを採用し、保守性と拡張性を確保 この技術スタックは、Starlistアプリの特徴である「日常データの共有」を効率的に実現するために選定されています。特にユーザーによるテキストデータの取り込みやすさと、Google APIを活用したデータ整理・分類の自動化に重点を置き、スターとファンのシームレスな連携を技術面から支えます。**

**11\. 技術要件詳細**

**詳細は別途 technical\_requirements\_plan.md 等の技術文書を参照。**

**（このREADME.docxの「11-1. フロントエンド技術要件」以降の技術要件詳細は、前の会話で提示された内容をベースに、このREADMEの記載に合わせて別途技術文書で詳細化することを推奨します。）**

**12\. リスクと対策**

* **12-1. 技術的リスク**  
  * **データ連携API変更: 抽象化レイヤーの実装**  
  * **スケーラビリティ課題: シャーディング、負荷テスト実施**  
  * **セキュリティ脆弱性: 定期的な外部監査、ペネトレーションテスト**  
  * **外部SDK（アフィリエイト、オファーウォール）の仕様変更・障害対応**  
  * **Google APIの仕様変更・利用料金変動リスク**  
* **12-2. ビジネスリスク**  
  * **スター獲得の難しさ: 初期段階でニッチ領域に集中、徐々に拡大**  
  * **収益性: 多様な収益源確保、コスト最適化、アフィリエイト・オファーウォールの収益性変動**  
  * **ユーザーの広告疲れ・オファーウォール離れ**  
* **12-3. 法的リスク**  
  * **個人情報保護: GDPR/個人情報保護法対応**  
  * **アフィリエイト規制: 各国法規制の遵守、ステルスマーケティング防止**  
  * **著作権問題: 取り込まれたテキストデータの内容が第三者の著作権を侵害しないよう、スターへの注意喚起と確認プロセスの導入。コンテンツ参照のみとし、直接的な著作物の共有は回避。**  
  * **景品表示法（オファーウォールのリワード、アフィリエイトのPR表記など）**

**13\. 成功指標**

**（主要KPIは「5. 課金・収益モデル」セクションで定義された各プランの加入率、継続率、ARPU、ゴールドチケット利用率、スターポイント流通量、広告収益、アフィリエイト収益などと関連付けて設定）**

* **13-1. ストレスフリー構造の成功指標**  
  * **スター満足度：プラットフォーム使用後のストレスレベル低減（アンケート測定）**  
  * **コメント品質スコア：AIによる自動評価で85%以上が「建設的」と判定**  
  * **有料提案採用率：提案の35%以上がスターに採用される**  
  * **コメント返信率：スターがコメントに返信する割合が従来プラットフォームより25%向上**  
  * **プラットフォーム滞在時間：スターの1日あたりのアプリ使用時間が競合プラットフォームより40%長い**  
  * **コメント削除率：全コメントに対する削除率が8%未満（健全なコミュニケーション環境の指標）**  
  * **ブロックユーザー比率：アクティブユーザーに対するブロックされたユーザーの比率が4%未満**

**14\. 市場ポジショニングと差別化要素**

* **14-1. Starlistの独自価値提案**  
  * **14-1-1. スターの日常データの活用**  
    * **競合サービスが「画像・動画」を中心としているのに対し、Starlistは「スターの日常」データを中心とした独自のエコシステムを構築**  
    * **スターのライフスタイルをファンと共有することで、新たな関係性と収益機会を創出**  
  * **14-1-2. 全プラットフォーム統合（将来構想）**  
    * **複数のSNSやプラットフォームからのデータを統合し、包括的な分析を提供**  
    * **クロスプラットフォームでのファン行動を一元管理**  
  * **14-1-3. AIを活用したトレンド分析**  
    * **機械学習モデルによるコンテンツ分析と予測**  
    * **スターとファンの効率的なマッチングを実現**  
* **14-2. プレミアムな交流の場としての差別化戦略**  
  * **14-2-1. プラットフォーム差別化の基本方針**  
    * **ポジショニング：「スターの日常データ共有プラットフォーム」**  
    * **ターゲット：スターの日常に真に関心を持ち、質の高い交流を求めるファン層**  
  * **14-2-2. 他プラットフォームとの役割分担 | プラットフォーム | 役割 | コンテンツ特性 | ファン層 | | :----------------- | :----------- | :--------------------------------------------- | :------------------------------------------- | | YouTube/Instagram | 広範なリーチ | 一般的な情報発信\&lt;br\>エンターテイメント性 | カジュアルファン\&lt;br\>一般視聴者 | | Twitter | 速報性・拡散 | 日常的な短文投稿\&lt;br\>トレンド参加 | フォロワー全般\&lt;br\>トレンド関心層 | | Starlist | 深い関係構築 | スターの日常データ\&lt;br\>プレミアムコンテンツ（詳細情報・交流） | コアファン\&lt;br\>アクティブサポーター\&lt;br\>エントリーファン |**  
  * **14-2-3. 「Starlistでしか見られない」価値の具体例**  
    * **Starlistの特徴**  
      * **スターの日常を中心とした独自エコシステム：**  
        * **競合サービスが「画像や動画」を中心とするのに対し、スターの日常生活や購入品、視聴コンテンツなどを軸にした関係構築**  
        * **スターの日常をファンと共有することで、従来ない簡易的な投稿での収益機会を創出**  
      * **多様なプラットフォームからのデータ取り込みと整理：**  
        * **スマートフォンOS標準のOCR機能等を活用し、YouTube、Spotify、Netflixなど複数サービスの視聴・閲覧履歴テキストを簡単に取り込み、Google APIで一元的に整理・管理。**  
        * **同様にレシートのテキストデータ取り込みで買い物データも簡単に共有可能。**  
      * **プレミアムな交流の場：**  
        * **「量より質」を重視した深いコミュニケーション**  
        * **有料会員限定のコメント機能で質の高い交流を実現**  
        * **スターのメンタルに配慮したコメント管理システム**  
      * **階層的な会員制度とサポート体系：**  
        * **多層的な会員プラン（無料・エントリー・スタンダード・プレミアム）**  
        * **チケット制度やスターポイントによるコンテンツアクセス管理**  
        * **継続会員への特典拡大で長期的な関係構築を促進**  
    * **「Starlistでしか見られない」独自価値：**  
      * **スターの購入商品の詳細情報とレビュー（アフィリエイト連携）**  
      * **なぜその商品を選んだのかの背景ストーリー**  
      * **スターの所有アイテムコレクションの解説**  
    * **ファン参加型の特別体験：**  
      * **スターへの商品推薦機能**  
      * **オファーウォールを通じた無料でのスターポイント獲得機会 この特徴一覧は、Starlistが「スターの日常を中心とした高品質な交流プラットフォーム」というポジショニングを明確に示し、他のSNSやファンサービスとの差別化ポイントを浮き彫りにしています。**

**15\. AIとの連携ポイント**

* **15-1. データ分析と予測**  
  * **スターの日常データの分析: 生成AIを活用してスターの消費パターンを分析し、データ化。**  
  * **取り込みデータの商品カテゴリ分類（Google API活用）: ユーザーがOS標準OCR機能等で抽出しStarlistに取り込んだ商品やサービス名に関するテキストデータを、Google Cloud Natural Language API (GCNL) 等を用いて、「商品カテゴリ」（3-5項）に基づき自動でジャンル分けを行い、データの構造化と活用を促進する。**  
  * **コンテンツレコメンデーション: ファンの好みに合わせたパーソナライズされたコンテンツ推奨。**  
  * **コメント分類AIによるコミュニティ環境の健全化支援。**  
* **15-2. コンテンツ生成支援**  
  * **ファン向けパーソナライズドメッセージ: スターの代わりにファン個別のメッセージを生成（将来構想）。**  
  * **スター向けトレンド情報や投稿内容の提案。**

**16\. 提供コンテンツ一覧**

* **16-1. スマホ・アプリ関連**  
  * **アプリ使用情報**  
  * **YouTubeのフォロー**  
  * **YouTube動画閲覧履歴**  
  * **使用アプリランキング**  
  * **課金しているアプリの表示**  
  * **インストールしているアプリ一覧**  
  * **スクリーンタイム（どのアプリにどれくらい使用しているか）**  
* **16-2. ゲーム**  
  * **ゲーム利用履歴**  
  * **ゲーム使用時間**  
  * **ゲーム使用時間ランキング**  
* **16-3. 音楽・動画・読書関連**  
  * **Spotifyの再生履歴**  
  * **Amazon Musicの再生履歴**  
  * **Amazon・楽天・Yahoo\!ショッピング等の購入履歴（アフィリエイト連携）**  
  * **Amazonで閲覧した映画・アニメ・ドラマの履歴**  
  * **VOD（動画配信サービス）視聴履歴**  
  * **Netflixの閲覧履歴**  
  * **テレビ視聴履歴**  
  * **読んだ漫画・書籍の履歴**  
* **16-4. 買い物・ライフスタイル関連**  
  * **コンビニ・スーパーの購入履歴**  
  * **カフェ利用履歴**  
  * **Uber Eatsの利用履歴**  
  * **ファッションの購入履歴**  
  * **コスメの購入履歴**  
  * **健康食品・サプリメントの購入履歴**  
  * **キーホルダー/スマホケース/シールの購入履歴**  
    * 


## Theming (Material 3 + Tokens)

- Tokens: `lib/theme/tokens.dart` (radius/spacing/elevation/motion)
- Colors: `lib/theme/color_schemes.dart` (light/dark)
- Theme: `lib/theme/app_theme.dart` (ThemeData builder)

### Usage
```dart
final cs = Theme.of(context).colorScheme;
final tokens = Theme.of(context).extension<AppTokens>()!;
```

- `AppTheme` でライト/ダーク両テーマが提供されます。`MaterialApp` では `theme`, `darkTheme`, `themeMode` を指定して適用します。
- 共通スタイル値は `AppTokens` (`lib/theme/tokens.dart`) に集約しています。`BuildContext` 拡張 `context.tokens` を介して `spacing`, `radius`, `elevations`, `motion` などのトークンにアクセスできます。
- カラーは `Theme.of(context).colorScheme` を経由して取得してください。直接のマジックナンバー使用は避け、コンポーネント側で必要なアクセント色を選択します。
- カスタム UI を組む際は、`AppButton`・`AppCard`・`AppTextField` (`lib/ui/`) をベースにすると Material 3 とトークン準拠のスタイルを再利用できます。
- フォーカスリングはトークンで太さ・色・オフセットを制御しています。タッチ/キーボード操作を想定するウィジェットでは `Focus` / `InkWell` を用いて可視化を崩さないようにしてください。

## Runtime Flags & Supabase Deployment Flow

### Flutter Runtime Flags

| Flag               | Type   | Description                                 |
|--------------------|--------|---------------------------------------------|
| `kEnv`             | String | Build environment (`development/staging/prod`) |
| `kHideImportIcons` | bool   | Hide icon rendering entirely                |
| `kCfBypassLocal`   | bool   | Use only local assets (skip CDN requests)   |

Sample commands:

```bash
flutter run -d chrome --dart-define=ENV=development --dart-define=HIDE_IMPORT_ICONS=true --dart-define=CF_BYPASS_LOCAL=true
flutter run -d chrome --dart-define=ENV=development --dart-define=HIDE_IMPORT_ICONS=false --dart-define=CF_BYPASS_LOCAL=true
flutter run -d chrome --dart-define=ENV=production  --dart-define=HIDE_IMPORT_ICONS=false --dart-define=CF_BYPASS_LOCAL=false
```

### Make Targets

```bash
make db-push    # Push migrations to dev
make db-pull    # Pull dev schema
make fn-deploy  # Deploy Edge Functions
make fn-logs FUNC=sign-url  # Tail logs
make fn-serve   # Local serve (requires ./supabase/.env)
```

### CI/CD Rules

- PR 必須 (`flutter analyze`, `flutter test`, `supabase db push --dry-run`)
- `release/*` ブランチ push でステージングへ自動反映
- `main` ブランチ push で本番へ自動反映
- DB 変更は必ずマイグレーション経由
- Secrets は個人PC と CI で分離、期限付き・ローテ必須

### Rollback

```bash
supabase db dump -f backup/$(date +%Y%m%dT%H%M%S).sql   # デプロイ前
psql $DATABASE_URL < backup/YYYYMMDDTHHMMSS.sql         # 復旧
# or supabase migration revert (migration_id)
```

### Setup Checklist

- [ ] `supabase link --project-ref zjwvmoxpacbpwawlwbrd` をローカルで実行済み
- [ ] GitHub Secrets: `SUPABASE_ACCESS_TOKEN_STG` / `SUPABASE_ACCESS_TOKEN_PROD`
- [ ] CI で Supabase CLI をインストールできること
- [ ] PR チェックに `flutter analyze` / `flutter test` / `supabase db push --dry-run` が含まれている
- [ ] `.env` / `.env.*` は Git 管理対象外
```

## DoD (Definition of Done)
- [ ] 文書の目的と完了基準を明記しました。
